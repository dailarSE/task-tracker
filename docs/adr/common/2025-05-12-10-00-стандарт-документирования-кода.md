**ADR-0021: Стандарт Документирования Кода с Использованием Javadoc**

*   **Статус:** Утверждено
*   **Дата:** 2025-05-12
*   **Связанные ADR:** ADR-0013 (общие стандарты документирования)
*   **Контекст:** Для обеспечения читаемости, поддерживаемости и понимания кода `task-tracker` всеми членами команды (текущими и будущими) необходимо установить стандарт документирования Java-кода.
*   **Принятое Решение:**
    1.  **Обязательность Javadoc:**
        *   Все публичные и защищенные (`protected`) классы, интерфейсы, перечисления (`enum`), записи (`record`) и аннотации **ДОЛЖНЫ** иметь Javadoc-комментарии.
        *   Все публичные и защищенные (`protected`) методы и конструкторы **ДОЛЖНЫ** иметь Javadoc-комментарии.
        *   Для приватных методов Javadoc **РЕКОМЕНДУЕТСЯ**, если их логика нетривиальна или требует пояснений.
        *   Для публичных полей (констант) Javadoc **ОБЯЗАТЕЛЕН**.

    2.  **Содержание Javadoc для Типов (Классы, Интерфейсы, Enum, Records, Annotations):**
        *   **Общее описание:** Четкое описание назначения и роли типа в системе.
        *   **Основные ответственности:** Краткое перечисление ключевых функций или данных, за которые отвечает тип.
        *   **Ключевые особенности:** Упоминание важных аспектов реализации, паттернов, ограничений или неявных предположений, если они есть.
        *   **Взаимодействие:** По возможности, кратко указать основные зависимости или компоненты, с которыми данный тип взаимодействует, используя тег `{@link ...}` или `@see` для ссылок.
        *   **Пример использования:** Если тип сложен или его использование неочевидно, **РЕКОМЕНДУЕТСЯ** предоставить краткий пример использования внутри тега `{@code ...}` или ссылку `@see` на демонстрационный тест.
        *   **Потокобезопасность:** Для классов, предназначенных для многопоточного использования, **ДОЛЖНО** быть явно указано, являются ли они потокобезопасными, и если да, то при каких условиях.

    3.  **Содержание Javadoc для Методов и Конструкторов:**
        *   **Описание:** Краткое, но исчерпывающее описание того, что делает метод или конструктор. Для методов, переопределяющих методы из суперкласса/интерфейса, можно использовать `{@inheritDoc}`, если стандартная документация достаточна, но при наличии специфики или уточнений **СЛЕДУЕТ** предоставить собственное описание.
        *   **Параметры (`@param`):**
            *   Описание каждого параметра с использованием тега `@param имя_параметра описание`.
            *   Указывать, если параметр может быть `null` (и как это обрабатывается) или если для него есть специфические требования (например, формат, диапазон значений, непустая коллекция). Использовать аннотации `@NonNull`, `@Nullable` (например, от Lombok или JetBrains) для явного указания контракта по `null`.
        *   **Возвращаемое значение (`@return`):**
            *   Описание возвращаемого значения (если метод не `void`) с использованием тега `@return описание`.
            *   Указывать, может ли возвращаемое значение быть `null`, или если это коллекция, может ли она быть пустой.
        *   **Исключения (`@throws`):**
            *   Описание каждого **проверяемого (`checked`) исключения**, которое метод может выбросить, с использованием тега `@throws ТипИсключения описание_условия_выбрасывания`.
            *   Описание **непроверяемых (`unchecked`) бизнес-специфичных `RuntimeException`**, которые являются частью контракта метода и которые клиент API или вызывающий код может ожидать и должен обрабатывать (например, `IllegalArgumentException` при невалидных аргументах, `UserAlreadyExistsException`, `BadJwtException`).
            *   Для общих `RuntimeException` (например, `NullPointerException` из-за внутренней ошибки, не связанной с контрактом) документирование через `@throws` обычно не требуется, если они не являются ожидаемым поведением API.

    4.  **Стиль и Ясность:**
        *   Javadoc **ДОЛЖЕН** быть написан на **русском языке**.
        *   Комментарии должны быть грамотными, четкими, лаконичными и однозначно трактуемыми.
        *   Избегать избыточных или очевидных комментариев (например, `@return возвращает значение`).
        *   Использовать HTML-теги (`<p>`, `<ul>`, `<li>`, `{@code ...}`, `{@link ...}`) для форматирования и улучшения читаемости, где это уместно. Тег `{@code ...}` предпочтителен для имен классов, методов, полей, параметров и литеральных значений.

    5.  **Актуальность:**
        *   Javadoc-комментарии **ДОЛЖНЫ** поддерживаться в актуальном состоянии и обновляться синхронно с изменениями в коде. Неактуальная документация хуже, чем ее отсутствие.

    6.  **Интеграция с Lombok:**
        *   При использовании Lombok для генерации методов (например, `@Getter`, `@Setter`, `@RequiredArgsConstructor`), Javadoc **РЕКОМЕНДУЕТСЯ** писать для соответствующих полей или класса. IDE и инструменты генерации документации часто могут подхватывать такой Javadoc для сгенерированных методов.
        *   Если для сгенерированного Lombok'ом метода требуется специфический Javadoc, отличный от документации поля, или если Lombok не переносит Javadoc с поля на метод должным образом, то Javadoc **ДОЛЖЕН** быть написан для самого метода (Lombok позволяет это для некоторых аннотаций или через delombok).

*   **Рассмотренные Альтернативы:**
    *   Отсутствие формального стандарта Javadoc: Приводит к неконсистентному или отсутствующему документированию.
    *   Комментирование только сложной логики: Недостаточно для общего понимания API и контрактов компонентов.

*   **Последствия:**
    *   Повышение читаемости и поддерживаемости кода.
    *   Упрощение вхождения новых разработчиков в проект.
    *   Возможность генерации качественной API-документации.
    *   Требует дисциплины от разработчиков для поддержания документации.
    *   Облегчает проведение код-ревью, так как намерения автора становятся яснее.
